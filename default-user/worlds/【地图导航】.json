{
    "entries": {
        "0": {
            "key": [],
            "keysecondary": [],
            "comment": "规则",
            "content": "# 任务：\n根据前面的故事叙述和上下文，生成一个结构化的数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则出现在故事正文的末尾。\n\n# 核心逻辑与内容要求：\n1.  **分析上下文**：评估故事的设定、当前场景、已确定的角色位置、人物关系以及 `{{user}}` 的状态。\n2.  **判断移动性 (`MOVEBLOCK`)**：\n    *   如果故事上下文表明 `{{user}}` 无法自由移动（例如，被捕、被锁住、失去行动能力），则在 `<Map>` 的开头包含标签 `[MOVEBLOCK:YES]`。\n    *   否则，包含标签 `[MOVEBLOCK:NO]`。\n3.  **确定地点**：\n    *   根据当前故事范围定义 3 到 5 个相关的**主地点**。\n    *   为每个主地点列出 2 到 4 个相关的**次级地点**。\n4.  **填充角色**：\n    *   为每个次级地点列出当前在那里的角色，使用@符号连接地点和角色，多个角色用逗号分隔。\n    *   角色安置必须符合逻辑，并与故事叙述和既定事实保持一致。\n    *   优先使用故事中已经引入的角色。\n    *   如果某个次级地点没有已知角色，则无需加@符号。\n\n# 约束条件：\n1.  **用户排除**：角色 `{{user}}` 绝对不能出现在地图数据列表的任何位置。\n2.  **当前场景角色排除**：在生成此地图之前紧邻的*当前*场景中，正在与 `{{user}}` 积极互动的角色，绝对不能被列在 `<Map>` 内的*任何*地点。\n3.  **角色唯一性**：通常情况下，每个角色应只出现在地图数据中的一个位置。\n4.  **冒险元素（可选）**：对于冒险类型的故事，您可以在相关的次级地点包含非角色元素，如\"宝箱\"、\"怪物\"等。\n\n# 输出格式：\n严格遵守以下格式，注意使用@符号连接次级地点和角色：\n\n<Map>\n[MOVEBLOCK:NO]\n[主地点A]次级地点A@角色A,角色B|次级地点B@角色C|次级地点C\n[主地点B]次级地点D@角色D|次级地点E|次级地点F@角色E\n[主地点C]次级地点G@角色F,角色G|次级地点H|次级地点I@角色H\n</Map>\n\n确保输出*仅*基于故事上下文生成。请特别注意：\n- 使用@符号分隔地点和角色（而非空格）\n- 多个角色之间使用逗号分隔（无空格）\n- 次级地点之间使用|符号分隔",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 1,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 0,
            "displayIndex": 0,
            "extensions": {
                "position": 4,
                "exclude_recursion": false,
                "display_index": 0,
                "probability": 100,
                "useProbability": true,
                "depth": 0,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "1": {
            "key": [],
            "keysecondary": [],
            "comment": "样式-白",
            "content": "<style>\n  .map_navigation {\n    font-family: 'Arial', sans-serif;\n    color: #333333;\n  }\n  \n  .map_container {\n    background-color: #ffffff;\n    padding: 20px;\n    border-radius: 16px;\n    box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.08), \n                -6px -6px 12px rgba(255, 255, 255, 0.4);\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    margin: 15px 5px;\n    border: 1px solid #e0e0e0;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 80px;\n    background: linear-gradient(to bottom, rgba(240, 240, 240, 0.2), transparent);\n    pointer-events: none;\n    border-radius: 16px 16px 0 0;\n  }\n  \n  .move_block_notice {\n    background-color: #fff0f0;\n    color: #d85050;\n    padding: 12px;\n    border-radius: 12px;\n    border: 1px solid #ffcccc;\n    text-align: center;\n    font-weight: bold;\n    margin-bottom: 15px;\n    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.03),\n                inset -2px -2px 5px rgba(255, 255, 255, 0.4);\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #e0e0e0;\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: #555;\n    font-size: 16px;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: #f8f8f8;\n    border-radius: 12px;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.04),\n                -4px -4px 8px rgba(255, 255, 255, 0.5);\n    border: 1px solid #e0e0e0;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: #f0f0f0;\n    transform: translateY(-2px);\n    box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.05),\n                -5px -5px 10px rgba(255, 255, 255, 0.6);\n    z-index: 1;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.03),\n                -3px -3px 6px rgba(255, 255, 255, 0.4);\n    background: #e8e8e8;\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: #f0f7ff;\n    border-color: #959595;\n    box-shadow: 0 0 8px rgba(74, 159, 255, 0.15),\n                4px 4px 8px rgba(0, 0, 0, 0.04),\n                -4px -4px 8px rgba(255, 255, 255, 0.5);\n    z-index: 2;\n  }\n  \n  .main_location.selected::before, .sub_location.selected::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 5px;\n    height: 100%;\n    background: linear-gradient(to bottom, #a0a0a0, #989898);\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 15px;\n    display: block;\n    margin-bottom: 8px;\n    color: #333;\n    text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.5);\n  }\n  \n  .characters_list {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: linear-gradient(145deg, #f0f0f0, #e8e8e8);\n    padding: 4px 8px;\n    margin: 2px;\n    border-radius: 4px;\n    color: #555;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.03);\n    font-size: 11px;\n    border: 1px solid #e0e0e0;\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 15px;\n    margin-top: 10px;\n    border-top: 1px solid #e0e0e0;\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    padding: 12px 25px;\n    background: linear-gradient(145deg, #f8f8f8, #eaeaea);\n    border: none;\n    border-radius: 30px;\n    color: #333;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.06),\n                -3px -3px 6px rgba(255, 255, 255, 0.5);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background: linear-gradient(145deg, #f0f0f0, #e8e8e8);\n    transform: translateY(-2px);\n    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.08),\n                -4px -4px 8px rgba(255, 255, 255, 0.6);\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.03),\n                -1px -1px 3px rgba(255, 255, 255, 0.4);\n    background: linear-gradient(145deg, #e8e8e8, #f0f0f0);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: linear-gradient(145deg, #e8e8e8, #f0f0f0);\n  }\n  \n  /* 响应式布局 */\n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n  \n  /* 自定义滚动条 */\n  .map_container::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  .map_container::-webkit-scrollbar-track {\n    background: #f0f0f0;\n    border-radius: 4px;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb {\n    background: #d0d0d0;\n    border-radius: 4px;\n    border: 2px solid #f0f0f0;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb:hover {\n    background: #b0b0b0;\n  }\n</style>",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 1,
            "displayIndex": 1,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 1,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "2": {
            "key": [],
            "keysecondary": [],
            "comment": "设置-开启则直接发送，关闭则填在输入框",
            "content": "",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 2,
            "displayIndex": 5,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 5,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "3": {
            "key": [],
            "keysecondary": [],
            "comment": "设置-初始化延迟",
            "content": "100",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 3,
            "displayIndex": 6,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 6,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "4": {
            "uid": 4,
            "key": [],
            "keysecondary": [],
            "comment": "样式-轻量白",
            "content": "<style>\n/* General body/font settings - retained from original implication */\n.map_navigation {\n  font-family: 'Arial', sans-serif; /* Retained as per original, consider a lighter sans-serif like 'Inter' or 'Roboto' for further lightness if desired */\n  color: #333333;\n  background-color: transparent; /* Made background transparent */\n  /* padding: 10px; Removed padding, let child elements define spacing */\n}\n\n/* Main container for the map navigation UI */\n.map_container {\n  background-color: #ffffff;\n  padding: 20px;\n  /* padding-top: 45px; Adjusted as button is moved to bottom */\n  border-radius: 12px; /* Slightly softer radius */\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Even softer, more diffused shadow */\n  display: flex;\n  flex-direction: column;\n  gap: 15px; /* Further reduced gap */\n  margin: 15px 5px;\n  border: 1px solid #f0f0f0; /* Even lighter border */\n  position: relative; /* Crucial for positioning pseudo-elements */\n  overflow: hidden; /* Keep for ::before/::after pseudo-elements if they extend outside */\n}\n\n/* Sidebar accent line - reverted to full height */\n.map_container::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0; /* Position on the left side */\n  width: 3px; /* Width of the accent line */\n  height: 100%; /* Span the full height of the container */\n  background-color: #e8e8e8; /* Light gray color for the accent line */\n  pointer-events: none; /* Ensure it doesn't interfere with interactions */\n  border-radius: 12px 0 0 12px; /* Match container's left border radius */\n  display: block; /* Ensure it's displayed */\n}\n\n/* Removed .map_container::after as we reverted to a single full-height sidebar line */\n\n/* Notice block for moving characters - made less aggressive */\n.move_block_notice {\n  background-color: #fef7f7; /* Lighter background */\n  color: #c84040; /* Slightly softer red */\n  padding: 10px 15px;\n  border-radius: 8px;\n  border: 1px solid #fde0e0; /* Lighter border */\n  text-align: center;\n  font-weight: normal; /* Reduced font weight */\n  font-size: 0.9em; /* Slightly smaller font size */\n  margin-bottom: 15px; /* This will now be respected by the gap or be the last item before action area */\n  box-shadow: none; /* Removed inner shadow for lightness */\n}\n\n/* Title bar for sections - Removed */\n.map_title_bar {\n  display: none; /* Title bar removed as requested */\n}\n\n/* Containers for main and sub-locations */\n.main_locations_container, .sub_location_container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 15px;\n}\n\n/* Individual location items */\n.main_location, .sub_location {\n  padding: 12px; /* Reduced padding */\n  background: #ffffff; /* Cleaner background */\n  border-radius: 10px; /* Softer radius */\n  cursor: default;\n  transition: all 0.25s ease; /* Slightly faster transition */\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.04); /* Softer shadow */\n  border: 1px solid #e9e9e9; /* Lighter border */\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* Hover and active states for clickable locations */\n.last_mes .main_location, .last_mes .sub_location {\n  cursor: pointer;\n}\n\n.last_mes .main_location:hover, .last_mes .sub_location:hover {\n  background: #f9f9f9; /* Lighter hover */\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.06); /* Slightly more pronounced hover shadow */\n  border-color: #ddd; /* Slightly darker border on hover for definition */\n  z-index: 1;\n}\n\n.last_mes .main_location:active, .last_mes .sub_location:active {\n  transform: translateY(0);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); /* Subtler active shadow */\n  background: #f5f5f5; /* Lighter active state */\n}\n\n/* Selected location styling */\n.main_location.selected, .sub_location.selected {\n  background: #f7fbff; /* Lighter selected background */\n  border-color: #a0cfff; /* Softer blue border */\n  box-shadow: 0 0 0 2px rgba(74, 159, 255, 0.2), /* Outer glow effect */\n              0 2px 5px rgba(0, 0, 0, 0.04); /* Keep base shadow subtle */\n  z-index: 2;\n}\n\n/* Selected location indicator bar - simplified */\n.main_location.selected::before, .sub_location.selected::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 4px; /* Thinner bar */\n  height: 100%;\n  background: #85bfff; /* Solid, softer blue */\n  border-radius: 10px 0 0 10px; /* Match parent radius if needed on one side */\n}\n\n/* Location name text */\n.location_name {\n  font-weight: 600; /* Bolder for better readability */\n  font-size: 14px; /* Slightly smaller */\n  display: block;\n  margin-bottom: 5px; /* Adjusted spacing, no separator needed */\n  padding-bottom: 0; /* Removed padding for separator */\n  color: #333;\n  text-shadow: none; /* Removed text shadow for cleaner look */\n  border-bottom: none; /* Removed separator line */\n}\n\n/* List of characters within a location */\n.characters_list {\n  margin-top: auto; /* Push to bottom if location card has extra space */\n  padding-top: 5px; /* Adjusted space above character list */\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px; /* Slightly reduced gap between character names */\n}\n\n/* Individual character name tags - Lighter style with a \"floating point\" (dot) */\n.character_name {\n  display: inline-flex; /* Use flex to align dot and text */\n  align-items: center; /* Vertically center dot with text */\n  background: none; /* Removed background */\n  padding: 2px 4px; /* Adjusted padding, dot will add its own space */\n  margin: 1px; /* Minimal margin */\n  border-radius: 3px; /* Subtle radius */\n  color: #555; /* Retained text color for readability */\n  box-shadow: none; /* Removed shadow */\n  font-size: 11px;\n  border: none; /* Removed general border */\n  position: relative; /* For pseudo-element positioning */\n}\n\n.character_name::before {\n  content: '';\n  display: inline-block;\n  width: 5px; /* Size of the dot */\n  height: 5px; /* Size of the dot */\n  background-color: #a0cfff; /* Light blue color for the dot */\n  border-radius: 50%; /* Makes it a circle */\n  margin-right: 5px; /* Space between dot and text */\n}\n\n/* Action area for the button - now part of the flex flow */\n.map_action_area {\n  /* Removed absolute positioning: position, bottom, right, top */\n  /* Removed grid-column */\n  width: 100%; /* Span the full width of the flex container's content area */\n  padding: 0; /* Button will have its own padding/margins if needed */\n  margin-top: 0; /* Gap from .map_container will handle spacing from content above */\n  border-top: none;\n  /* display: flex; /* Optional: if you need to center a button that isn't full width */\n  /* justify-content: center; /* Optional */\n}\n\n/* \"Go to selected map\" button styling - changed to a long bar button */\n.go_button {\n  display: block; /* Make it a block to take full width */\n  width: 100%;    /* Take full width of .map_action_area */\n  padding: 12px 20px; /* Vertical and horizontal padding for text */\n  background: #ffffff; /* White background */\n  border: 1px solid #e0e0e0; /* Light border */\n  border-radius: 25px; /* Rounded corners for a pill shape */\n  color: #333333; /* Dark text color */\n  font-size: 1rem; /* Text size */\n  font-weight: 500; /* Medium font weight */\n  text-align: center; /* Center the text */\n  cursor: pointer;\n  transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06); /* Subtle shadow */\n  box-sizing: border-box; /* Include padding and border in the element's total width and height */\n  /* Remove old icon-specific styles */\n  /* height: auto; */ /* No longer fixed height */\n  /* line-height: normal; */ /* No longer needed for icon centering */\n}\n\n/* .go_button svg { */\n  /* display: none; */ /* Hide SVG if emoji is used - this rule is for the old button style */\n/* } */\n\n.go_button:not(.disabled):hover {\n  background: #f5f5f5; /* Lighter hover background */\n  border-color: #d0d0d0; /* Slightly darker border on hover */\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08); /* Slightly more pronounced hover shadow */\n  /* transform: none; */ /* No Y-translate for bar button hover typically */\n}\n\n.go_button:not(.disabled):active {\n  background: #e9e9e9; /* Slightly darker active state */\n  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05); /* Inner shadow for pressed effect */\n  transform: translateY(1px); /* Slight press down effect */\n}\n\n.go_button.disabled {\n  opacity: 0.6; /* More visible disabled state */\n  cursor: not-allowed;\n  background: #f8f8f8; /* Lighter background for disabled */\n  border-color: #e0e0e0;\n  box-shadow: none; /* No shadow when disabled */\n  color: #999999; /* Lighter text color for disabled */\n}\n\n/* Responsive layouts */\n@media (max-width: 600px) {\n  .main_locations_container, .sub_location_container {\n    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); /* Adjusted minmax for smaller screens */\n  }\n  .map_container {\n    padding: 15px; /* Overall padding for smaller screens */\n    /* padding-top: 40px; No longer needed as button is at bottom */\n  }\n\n  .map_action_area {\n    /* No specific changes needed here unless different padding/margin is desired for small screens */\n    /* bottom: 10px; Removed */\n    /* right: 10px; Removed */\n  }\n\n  .go_button {\n    padding: 10px 15px; /* Slightly reduced padding for smaller screens */\n    font-size: 0.9rem; /* Slightly smaller font size */\n    border-radius: 20px; /* Adjust if height changes, to maintain pill shape */\n    /* width: auto; Removed fixed width */\n    /* height: auto; Removed fixed height */\n  }\n\n  .location_name {\n    font-size: 13px;\n    margin-bottom: 4px;\n  }\n  .characters_list {\n    padding-top: 4px;\n  }\n  .character_name {\n    font-size: 10px; /* Slightly smaller character names on small screens */\n    padding: 1px 3px; /* Adjusted padding */\n  }\n  .character_name::before {\n    width: 4px;\n    height: 4px;\n    margin-right: 4px;\n  }\n  .map_container::before {\n    /* No specific adjustment needed here if it's always 100% */\n  }\n}\n\n/* Custom scrollbar - retained, ensure it fits the new aesthetic */\n.map_container::-webkit-scrollbar {\n  width: 6px; /* Thinner scrollbar */\n}\n\n.map_container::-webkit-scrollbar-track {\n  background: #f5f5f5; /* Lighter track */\n  border-radius: 3px;\n}\n\n.map_container::-webkit-scrollbar-thumb {\n  background: #cccccc; /* Lighter thumb */\n  border-radius: 3px;\n  border: 1px solid #f5f5f5; /* Border to match track */\n}\n\n.map_container::-webkit-scrollbar-thumb:hover {\n  background: #bbbbbb; /* Slightly darker hover for thumb */\n}\n</style>",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "displayIndex": 4
        },
        "5": {
            "key": [],
            "keysecondary": [],
            "comment": "样式-赛博朋克",
            "content": "<style>\n  .map_navigation {\n    font-family: 'Orbitron', 'Arial', sans-serif;\n    color: #00ffd5;\n  }\n  \n  .map_container {\n    background-color: #0a0a14;\n    padding: 20px;\n    border-radius: 0;\n    box-shadow: 0 0 15px rgba(0, 255, 213, 0.3), 0 0 30px rgba(255, 0, 136, 0.2);\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    margin: 15px 5px;\n    border: 1px solid #31008c;\n    position: relative;\n    overflow: hidden;\n    border-left: 4px solid #ff00aa;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 80px;\n    background: linear-gradient(to bottom, rgba(255, 0, 170, 0.1), transparent);\n    pointer-events: none;\n  }\n  \n  .move_block_notice {\n    background-color: #1a0915;\n    color: #ff2a6d;\n    padding: 12px;\n    border-radius: 0;\n    border: 1px solid #560d36;\n    text-align: center;\n    font-weight: bold;\n    margin-bottom: 15px;\n    box-shadow: inset 0 0 10px rgba(255, 0, 170, 0.3);\n    text-transform: uppercase;\n    letter-spacing: 1px;\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #31008c;\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: #ff00aa;\n    font-size: 18px;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 3px;\n    text-shadow: 0 0 10px rgba(255, 0, 170, 0.7);\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: #101022;\n    border-radius: 0;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.2);\n    border: 1px solid #31008c;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .main_location::after, .sub_location::after {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 20px;\n    height: 20px;\n    background: linear-gradient(135deg, transparent 50%, #ff00aa 50%);\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: #1a1a3a;\n    transform: translateY(-3px);\n    box-shadow: 0 0 20px rgba(0, 255, 213, 0.4);\n    border-color: #00ffd5;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.2);\n    background: #0d0d25;\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: #1a0029;\n    border-color: #00ffd5;\n    box-shadow: 0 0 20px rgba(0, 255, 213, 0.4);\n  }\n  \n  .main_location.selected::before, .sub_location.selected::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 5px;\n    height: 100%;\n    background: linear-gradient(to bottom, #00ffd5, #0097e6);\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 14px;\n    display: block;\n    margin-bottom: 8px;\n    color: #00ffd5;\n    text-shadow: 0 0 5px rgba(0, 255, 213, 0.7);\n    letter-spacing: 1px;\n    text-transform: uppercase;\n  }\n  \n  .characters_list {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: linear-gradient(145deg, #1a1a3a, #0d0d25);\n    padding: 4px 8px;\n    margin: 2px;\n    border-radius: 0;\n    color: #ff00aa;\n    box-shadow: 0 0 5px rgba(255, 0, 170, 0.3);\n    font-size: 11px;\n    border: 1px solid #31008c;\n    letter-spacing: 1px;\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 15px;\n    margin-top: 10px;\n    border-top: 1px solid #31008c;\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    padding: 12px 25px;\n    background: linear-gradient(145deg, #1a1a3a, #0d0d25);\n    border: 1px solid #31008c;\n    border-radius: 0;\n    color: #00ffd5;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.3);\n    position: relative;\n    overflow: hidden;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(0, 255, 213, 0.3), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background: linear-gradient(145deg, #1d1d45, #0f0f2d);\n    transform: translateY(-2px);\n    box-shadow: 0 0 20px rgba(0, 255, 213, 0.5);\n    color: #fff;\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.3);\n    background: linear-gradient(145deg, #0d0d25, #1a1a3a);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: linear-gradient(145deg, #0d0d25, #1a1a3a);\n  }\n  \n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n</style>",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 5,
            "displayIndex": 4,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 4,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "6": {
            "key": [],
            "keysecondary": [],
            "comment": "样式-粉",
            "content": "<style>\n  .map_navigation {\n    font-family: 'Microsoft YaHei', 'Arial', sans-serif;\n    color: #5e4e54;\n  }\n  \n  .map_container {\n    background-color: rgba(255, 240, 245, 0.95);\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 0 15px rgba(219, 112, 147, 0.3);\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    margin: 15px 5px;\n    border: 2px solid #f8bbd0;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    background: linear-gradient(to bottom, rgba(249, 202, 219, 0.4), transparent);\n    pointer-events: none;\n    border-radius: 12px 12px 0 0;\n  }\n  \n  .move_block_notice {\n    background-color: #ffebee;\n    color: #c62828;\n    padding: 12px;\n    border-radius: 8px;\n    border: 1px solid #ef9a9a;\n    text-align: center;\n    font-weight: bold;\n    margin-bottom: 15px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 2px solid #f8bbd0;\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: #ad1457;\n    font-size: 18px;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    text-shadow: 1px 1px 2px rgba(233, 30, 99, 0.2);\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: #fce4ec;\n    border-radius: 10px;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);\n    border: 1px solid #f48fb1;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: #f8bbd0;\n    transform: translateY(-3px);\n    box-shadow: 0 5px 15px rgba(244, 143, 177, 0.4);\n    z-index: 1;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    background: #f48fb1;\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: #f48fb1;\n    border-color: #ec407a;\n    box-shadow: 0 0 12px rgba(236, 64, 122, 0.4);\n    z-index: 2;\n  }\n  \n  .main_location.selected::before, .sub_location.selected::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 5px;\n    height: 100%;\n    background: linear-gradient(to bottom, #ec407a, #d81b60);\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 15px;\n    display: block;\n    margin-bottom: 8px;\n    color: #880e4f;\n    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);\n  }\n  \n  .characters_list {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: rgba(255, 255, 255, 0.7);\n    padding: 4px 8px;\n    margin: 2px;\n    border-radius: 20px;\n    color: #ad1457;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    font-size: 11px;\n    border: 1px solid #f8bbd0;\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 15px;\n    margin-top: 10px;\n    border-top: 2px solid #f8bbd0;\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    padding: 12px 25px;\n    background: linear-gradient(145deg, #f06292, #ec407a);\n    border: none;\n    border-radius: 30px;\n    color: #fff;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    box-shadow: 0 4px 8px rgba(236, 64, 122, 0.4);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background: linear-gradient(145deg, #ec407a, #d81b60);\n    transform: translateY(-2px);\n    box-shadow: 0 6px 15px rgba(236, 64, 122, 0.5);\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 0 2px 5px rgba(236, 64, 122, 0.3);\n    background: linear-gradient(145deg, #d81b60, #c2185b);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: linear-gradient(145deg, #f8bbd0, #f48fb1);\n  }\n  \n  /* 响应式布局 */\n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n  \n  /* 自定义滚动条 */\n  .map_container::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  .map_container::-webkit-scrollbar-track {\n    background: #fce4ec;\n    border-radius: 4px;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb {\n    background: #f48fb1;\n    border-radius: 4px;\n    border: 2px solid #fce4ec;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb:hover {\n    background: #ec407a;\n  }\n</style>",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 6,
            "displayIndex": 2,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 2,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        },
        "7": {
            "key": [],
            "keysecondary": [],
            "comment": "样式-低饱和莫兰迪",
            "content": "<style>\n  .map_navigation {\n    font-family: 'ZCOOL XiaoWei', 'Microsoft YaHei', sans-serif;\n    color: var(--gal-text-dark, #6b5f56);\n  }\n  \n  .map_container {\n    background-color: var(--gal-bg-light, #f8f4f0);\n    padding: 25px;\n    border-radius: 20px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    margin: 15px 5px;\n    border: 1px solid var(--gal-border, #d3c6b9);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    background: linear-gradient(to bottom, rgba(211, 198, 185, 0.2), transparent);\n    pointer-events: none;\n    border-radius: 20px 20px 0 0;\n  }\n  \n  .move_block_notice {\n    background-color: var(--gal-warning, #e5d7b3);\n    color: #6b5f56;\n    padding: 15px;\n    border-radius: 16px;\n    border: 1px solid rgba(229, 215, 179, 0.8);\n    text-align: center;\n    font-weight: normal;\n    margin-bottom: 20px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 20px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid var(--gal-border, #d3c6b9);\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: var(--gal-primary, #b4a295);\n    font-size: 22px;\n    margin: 0;\n    font-family: 'ZCOOL QingKe HuangYou', sans-serif;\n    position: relative;\n  }\n  \n  .map_title_bar h3:before,\n  .map_title_bar h3:after {\n    content: '✧';\n    display: inline-block;\n    margin: 0 10px;\n    color: var(--gal-pink, #e6c6c6);\n    font-size: 18px;\n    opacity: 0.8;\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: white;\n    border-radius: 16px;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    border: 1px solid var(--gal-border, #d3c6b9);\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: var(--gal-bg-medium, #e8e2d9);\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);\n    border-color: var(--gal-primary, #b4a295);\n    z-index: 1;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    background: var(--gal-bg-medium, #e8e2d9);\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: var(--gal-primary, #b4a295);\n    border-color: var(--gal-primary, #b4a295);\n    color: white;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);\n    transform: translateY(-2px);\n    z-index: 2;\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 15px;\n    display: block;\n    margin-bottom: 8px;\n    color: var(--gal-text-dark, #6b5f56);\n    transition: color 0.2s ease;\n  }\n  \n  .main_location.selected .location_name, \n  .sub_location.selected .location_name {\n    color: white;\n  }\n  \n  .characters_list {\n    margin-top: 10px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: var(--gal-bg-light, #f8f4f0);\n    padding: 5px 10px;\n    margin: 2px;\n    border-radius: 20px;\n    color: var(--gal-text-muted, #a39589);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    font-size: 12px;\n    border: 1px solid var(--gal-border, #d3c6b9);\n    transition: all 0.2s ease;\n  }\n  \n  .character_name:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);\n    border-color: var(--gal-primary-light, #dcd1c7);\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 20px;\n    margin-top: 15px;\n    border-top: 1px solid var(--gal-border, #d3c6b9);\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    background-color: var(--gal-success, #a5bdaa);\n    color: white;\n    border: none;\n    border-radius: 50px;\n    padding: 12px 35px;\n    font-size: 16px;\n    font-weight: normal;\n    cursor: pointer;\n    transition: background-color 0.2s ease, box-shadow 0.3s ease, transform 0.2s ease;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    letter-spacing: 0.5px;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background-color: #96b09b;\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    background-color: #96b09b;\n  }\n  \n  .go_button.disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background-color: var(--gal-bg-medium, #e8e2d9);\n    color: var(--gal-text-muted, #a39589);\n    box-shadow: none;\n  }\n  \n  .sub_location_container {\n    background-color: var(--gal-bg-medium, #e8e2d9);\n    border-radius: 16px;\n    padding: 20px;\n    border: 1px solid var(--gal-border, #d3c6b9);\n    margin-bottom: 20px;\n  }\n  \n  /* 响应式布局 */\n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n  \n  /* 自定义滚动条 */\n  .map_container::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  .map_container::-webkit-scrollbar-track {\n    background: var(--gal-bg-light, #f8f4f0);\n    border-radius: 4px;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb {\n    background: var(--gal-primary, #b4a295);\n    border-radius: 4px;\n    border: 2px solid var(--gal-bg-light, #f8f4f0);\n  }\n  \n  .map_container::-webkit-scrollbar-thumb:hover {\n    background: var(--gal-primary-light, #dcd1c7);\n  }\n</style>",
            "constant": false,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 100,
            "position": 0,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 4,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": false,
            "automationId": "",
            "role": null,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 7,
            "displayIndex": 3,
            "extensions": {
                "position": 0,
                "exclude_recursion": false,
                "display_index": 3,
                "probability": 100,
                "useProbability": true,
                "depth": 4,
                "selectiveLogic": 0,
                "group": "",
                "group_override": false,
                "group_weight": 100,
                "prevent_recursion": false,
                "delay_until_recursion": false,
                "scan_depth": null,
                "match_whole_words": null,
                "use_group_scoring": false,
                "case_sensitive": null,
                "automation_id": "",
                "role": 0,
                "vectorized": false,
                "sticky": 0,
                "cooldown": 0,
                "delay": 0
            }
        }
    },
    "originalData": {
        "entries": [
            {
                "id": 0,
                "keys": [],
                "secondary_keys": [],
                "comment": "规则",
                "content": "# 任务：\n根据前面的故事叙述和上下文，生成一个结构化的数据块。此数据块应紧跟在 `</content>` 标签之后，或者如果该标签不存在，则出现在故事正文的末尾。\n\n# 核心逻辑与内容要求：\n1.  **分析上下文**：评估故事的设定、当前场景、已确定的角色位置、人物关系以及 `{{user}}` 的状态。\n2.  **判断移动性 (`MOVEBLOCK`)**：\n    *   如果故事上下文表明 `{{user}}` 无法自由移动（例如，被捕、被锁住、失去行动能力），则在 `<Map>` 的开头包含标签 `[MOVEBLOCK:YES]`。\n    *   否则，包含标签 `[MOVEBLOCK:NO]`。\n3.  **确定地点**：\n    *   根据当前故事范围定义 3 到 5 个相关的**主地点**。\n    *   为每个主地点列出 2 到 4 个相关的**次级地点**。\n4.  **填充角色**：\n    *   为每个次级地点列出当前在那里的角色，使用@符号连接地点和角色，多个角色用逗号分隔。\n    *   角色安置必须符合逻辑，并与故事叙述和既定事实保持一致。\n    *   优先使用故事中已经引入的角色。\n    *   如果某个次级地点没有已知角色，则无需加@符号。\n\n# 约束条件：\n1.  **用户排除**：角色 `{{user}}` 绝对不能出现在地图数据列表的任何位置。\n2.  **当前场景角色排除**：在生成此地图之前紧邻的*当前*场景中，正在与 `{{user}}` 积极互动的角色，绝对不能被列在 `<Map>` 内的*任何*地点。\n3.  **角色唯一性**：通常情况下，每个角色应只出现在地图数据中的一个位置。\n4.  **冒险元素（可选）**：对于冒险类型的故事，您可以在相关的次级地点包含非角色元素，如\"宝箱\"、\"怪物\"等。\n\n# 输出格式：\n严格遵守以下格式，注意使用@符号连接次级地点和角色：\n\n<Map>\n[MOVEBLOCK:NO]\n[主地点A]次级地点A@角色A,角色B|次级地点B@角色C|次级地点C\n[主地点B]次级地点D@角色D|次级地点E|次级地点F@角色E\n[主地点C]次级地点G@角色F,角色G|次级地点H|次级地点I@角色H\n</Map>\n\n确保输出*仅*基于故事上下文生成。请特别注意：\n- 使用@符号分隔地点和角色（而非空格）\n- 多个角色之间使用逗号分隔（无空格）\n- 次级地点之间使用|符号分隔",
                "constant": true,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "after_char",
                "use_regex": true,
                "extensions": {
                    "position": 4,
                    "exclude_recursion": false,
                    "display_index": 0,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 0,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 1,
                "keys": [],
                "secondary_keys": [],
                "comment": "样式-白",
                "content": "<style>\n  .map_navigation {\n    font-family: 'Arial', sans-serif;\n    color: #333333;\n  }\n  \n  .map_container {\n    background-color: #ffffff;\n    padding: 20px;\n    border-radius: 16px;\n    box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.08), \n                -6px -6px 12px rgba(255, 255, 255, 0.4);\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    margin: 15px 5px;\n    border: 1px solid #e0e0e0;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 80px;\n    background: linear-gradient(to bottom, rgba(240, 240, 240, 0.2), transparent);\n    pointer-events: none;\n    border-radius: 16px 16px 0 0;\n  }\n  \n  .move_block_notice {\n    background-color: #fff0f0;\n    color: #d85050;\n    padding: 12px;\n    border-radius: 12px;\n    border: 1px solid #ffcccc;\n    text-align: center;\n    font-weight: bold;\n    margin-bottom: 15px;\n    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.03),\n                inset -2px -2px 5px rgba(255, 255, 255, 0.4);\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #e0e0e0;\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: #555;\n    font-size: 16px;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: #f8f8f8;\n    border-radius: 12px;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.04),\n                -4px -4px 8px rgba(255, 255, 255, 0.5);\n    border: 1px solid #e0e0e0;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: #f0f0f0;\n    transform: translateY(-2px);\n    box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.05),\n                -5px -5px 10px rgba(255, 255, 255, 0.6);\n    z-index: 1;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.03),\n                -3px -3px 6px rgba(255, 255, 255, 0.4);\n    background: #e8e8e8;\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: #f0f7ff;\n    border-color: #959595;\n    box-shadow: 0 0 8px rgba(74, 159, 255, 0.15),\n                4px 4px 8px rgba(0, 0, 0, 0.04),\n                -4px -4px 8px rgba(255, 255, 255, 0.5);\n    z-index: 2;\n  }\n  \n  .main_location.selected::before, .sub_location.selected::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 5px;\n    height: 100%;\n    background: linear-gradient(to bottom, #a0a0a0, #989898);\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 15px;\n    display: block;\n    margin-bottom: 8px;\n    color: #333;\n    text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.5);\n  }\n  \n  .characters_list {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: linear-gradient(145deg, #f0f0f0, #e8e8e8);\n    padding: 4px 8px;\n    margin: 2px;\n    border-radius: 4px;\n    color: #555;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.03);\n    font-size: 11px;\n    border: 1px solid #e0e0e0;\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 15px;\n    margin-top: 10px;\n    border-top: 1px solid #e0e0e0;\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    padding: 12px 25px;\n    background: linear-gradient(145deg, #f8f8f8, #eaeaea);\n    border: none;\n    border-radius: 30px;\n    color: #333;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.06),\n                -3px -3px 6px rgba(255, 255, 255, 0.5);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background: linear-gradient(145deg, #f0f0f0, #e8e8e8);\n    transform: translateY(-2px);\n    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.08),\n                -4px -4px 8px rgba(255, 255, 255, 0.6);\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.03),\n                -1px -1px 3px rgba(255, 255, 255, 0.4);\n    background: linear-gradient(145deg, #e8e8e8, #f0f0f0);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: linear-gradient(145deg, #e8e8e8, #f0f0f0);\n  }\n  \n  /* 响应式布局 */\n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n  \n  /* 自定义滚动条 */\n  .map_container::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  .map_container::-webkit-scrollbar-track {\n    background: #f0f0f0;\n    border-radius: 4px;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb {\n    background: #d0d0d0;\n    border-radius: 4px;\n    border: 2px solid #f0f0f0;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb:hover {\n    background: #b0b0b0;\n  }\n</style>",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": false,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 1,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 2,
                "keys": [],
                "secondary_keys": [],
                "comment": "设置-开启则直接发送，关闭则填在输入框",
                "content": "",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 5,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 3,
                "keys": [],
                "secondary_keys": [],
                "comment": "设置-初始化延迟",
                "content": "100",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 6,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 5,
                "keys": [],
                "secondary_keys": [],
                "comment": "样式-赛博朋克",
                "content": "<style>\n  .map_navigation {\n    font-family: 'Orbitron', 'Arial', sans-serif;\n    color: #00ffd5;\n  }\n  \n  .map_container {\n    background-color: #0a0a14;\n    padding: 20px;\n    border-radius: 0;\n    box-shadow: 0 0 15px rgba(0, 255, 213, 0.3), 0 0 30px rgba(255, 0, 136, 0.2);\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    margin: 15px 5px;\n    border: 1px solid #31008c;\n    position: relative;\n    overflow: hidden;\n    border-left: 4px solid #ff00aa;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 80px;\n    background: linear-gradient(to bottom, rgba(255, 0, 170, 0.1), transparent);\n    pointer-events: none;\n  }\n  \n  .move_block_notice {\n    background-color: #1a0915;\n    color: #ff2a6d;\n    padding: 12px;\n    border-radius: 0;\n    border: 1px solid #560d36;\n    text-align: center;\n    font-weight: bold;\n    margin-bottom: 15px;\n    box-shadow: inset 0 0 10px rgba(255, 0, 170, 0.3);\n    text-transform: uppercase;\n    letter-spacing: 1px;\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #31008c;\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: #ff00aa;\n    font-size: 18px;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 3px;\n    text-shadow: 0 0 10px rgba(255, 0, 170, 0.7);\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: #101022;\n    border-radius: 0;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.2);\n    border: 1px solid #31008c;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .main_location::after, .sub_location::after {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 20px;\n    height: 20px;\n    background: linear-gradient(135deg, transparent 50%, #ff00aa 50%);\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: #1a1a3a;\n    transform: translateY(-3px);\n    box-shadow: 0 0 20px rgba(0, 255, 213, 0.4);\n    border-color: #00ffd5;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.2);\n    background: #0d0d25;\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: #1a0029;\n    border-color: #00ffd5;\n    box-shadow: 0 0 20px rgba(0, 255, 213, 0.4);\n  }\n  \n  .main_location.selected::before, .sub_location.selected::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 5px;\n    height: 100%;\n    background: linear-gradient(to bottom, #00ffd5, #0097e6);\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 14px;\n    display: block;\n    margin-bottom: 8px;\n    color: #00ffd5;\n    text-shadow: 0 0 5px rgba(0, 255, 213, 0.7);\n    letter-spacing: 1px;\n    text-transform: uppercase;\n  }\n  \n  .characters_list {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: linear-gradient(145deg, #1a1a3a, #0d0d25);\n    padding: 4px 8px;\n    margin: 2px;\n    border-radius: 0;\n    color: #ff00aa;\n    box-shadow: 0 0 5px rgba(255, 0, 170, 0.3);\n    font-size: 11px;\n    border: 1px solid #31008c;\n    letter-spacing: 1px;\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 15px;\n    margin-top: 10px;\n    border-top: 1px solid #31008c;\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    padding: 12px 25px;\n    background: linear-gradient(145deg, #1a1a3a, #0d0d25);\n    border: 1px solid #31008c;\n    border-radius: 0;\n    color: #00ffd5;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.3);\n    position: relative;\n    overflow: hidden;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(0, 255, 213, 0.3), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background: linear-gradient(145deg, #1d1d45, #0f0f2d);\n    transform: translateY(-2px);\n    box-shadow: 0 0 20px rgba(0, 255, 213, 0.5);\n    color: #fff;\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 0 0 10px rgba(0, 255, 213, 0.3);\n    background: linear-gradient(145deg, #0d0d25, #1a1a3a);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: linear-gradient(145deg, #0d0d25, #1a1a3a);\n  }\n  \n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n</style>",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": false,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 4,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 6,
                "keys": [],
                "secondary_keys": [],
                "comment": "样式-粉",
                "content": "<style>\n  .map_navigation {\n    font-family: 'Microsoft YaHei', 'Arial', sans-serif;\n    color: #5e4e54;\n  }\n  \n  .map_container {\n    background-color: rgba(255, 240, 245, 0.95);\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 0 15px rgba(219, 112, 147, 0.3);\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    margin: 15px 5px;\n    border: 2px solid #f8bbd0;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    background: linear-gradient(to bottom, rgba(249, 202, 219, 0.4), transparent);\n    pointer-events: none;\n    border-radius: 12px 12px 0 0;\n  }\n  \n  .move_block_notice {\n    background-color: #ffebee;\n    color: #c62828;\n    padding: 12px;\n    border-radius: 8px;\n    border: 1px solid #ef9a9a;\n    text-align: center;\n    font-weight: bold;\n    margin-bottom: 15px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 2px solid #f8bbd0;\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: #ad1457;\n    font-size: 18px;\n    margin: 0;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    text-shadow: 1px 1px 2px rgba(233, 30, 99, 0.2);\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: #fce4ec;\n    border-radius: 10px;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);\n    border: 1px solid #f48fb1;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: #f8bbd0;\n    transform: translateY(-3px);\n    box-shadow: 0 5px 15px rgba(244, 143, 177, 0.4);\n    z-index: 1;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    background: #f48fb1;\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: #f48fb1;\n    border-color: #ec407a;\n    box-shadow: 0 0 12px rgba(236, 64, 122, 0.4);\n    z-index: 2;\n  }\n  \n  .main_location.selected::before, .sub_location.selected::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 5px;\n    height: 100%;\n    background: linear-gradient(to bottom, #ec407a, #d81b60);\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 15px;\n    display: block;\n    margin-bottom: 8px;\n    color: #880e4f;\n    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);\n  }\n  \n  .characters_list {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: rgba(255, 255, 255, 0.7);\n    padding: 4px 8px;\n    margin: 2px;\n    border-radius: 20px;\n    color: #ad1457;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    font-size: 11px;\n    border: 1px solid #f8bbd0;\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 15px;\n    margin-top: 10px;\n    border-top: 2px solid #f8bbd0;\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    padding: 12px 25px;\n    background: linear-gradient(145deg, #f06292, #ec407a);\n    border: none;\n    border-radius: 30px;\n    color: #fff;\n    font-size: 14px;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    box-shadow: 0 4px 8px rgba(236, 64, 122, 0.4);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background: linear-gradient(145deg, #ec407a, #d81b60);\n    transform: translateY(-2px);\n    box-shadow: 0 6px 15px rgba(236, 64, 122, 0.5);\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 0 2px 5px rgba(236, 64, 122, 0.3);\n    background: linear-gradient(145deg, #d81b60, #c2185b);\n  }\n  \n  .go_button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: linear-gradient(145deg, #f8bbd0, #f48fb1);\n  }\n  \n  /* 响应式布局 */\n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n  \n  /* 自定义滚动条 */\n  .map_container::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  .map_container::-webkit-scrollbar-track {\n    background: #fce4ec;\n    border-radius: 4px;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb {\n    background: #f48fb1;\n    border-radius: 4px;\n    border: 2px solid #fce4ec;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb:hover {\n    background: #ec407a;\n  }\n</style>",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": false,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 2,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            },
            {
                "id": 7,
                "keys": [],
                "secondary_keys": [],
                "comment": "样式-低饱和莫兰迪",
                "content": "<style>\n  .map_navigation {\n    font-family: 'ZCOOL XiaoWei', 'Microsoft YaHei', sans-serif;\n    color: var(--gal-text-dark, #6b5f56);\n  }\n  \n  .map_container {\n    background-color: var(--gal-bg-light, #f8f4f0);\n    padding: 25px;\n    border-radius: 20px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    margin: 15px 5px;\n    border: 1px solid var(--gal-border, #d3c6b9);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .map_container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    background: linear-gradient(to bottom, rgba(211, 198, 185, 0.2), transparent);\n    pointer-events: none;\n    border-radius: 20px 20px 0 0;\n  }\n  \n  .move_block_notice {\n    background-color: var(--gal-warning, #e5d7b3);\n    color: #6b5f56;\n    padding: 15px;\n    border-radius: 16px;\n    border: 1px solid rgba(229, 215, 179, 0.8);\n    text-align: center;\n    font-weight: normal;\n    margin-bottom: 20px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n  }\n  \n  .map_title_bar {\n    text-align: center;\n    margin-bottom: 20px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid var(--gal-border, #d3c6b9);\n    grid-column: 1 / -1;\n  }\n  \n  .map_title_bar h3 {\n    color: var(--gal-primary, #b4a295);\n    font-size: 22px;\n    margin: 0;\n    font-family: 'ZCOOL QingKe HuangYou', sans-serif;\n    position: relative;\n  }\n  \n  .map_title_bar h3:before,\n  .map_title_bar h3:after {\n    content: '✧';\n    display: inline-block;\n    margin: 0 10px;\n    color: var(--gal-pink, #e6c6c6);\n    font-size: 18px;\n    opacity: 0.8;\n  }\n  \n  .main_locations_container, .sub_location_container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n    gap: 15px;\n  }\n  \n  .main_location, .sub_location {\n    padding: 15px;\n    background: white;\n    border-radius: 16px;\n    cursor: default;\n    transition: all 0.3s ease;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    border: 1px solid var(--gal-border, #d3c6b9);\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .last_mes .main_location, .last_mes .sub_location {\n    cursor: pointer;\n  }\n  \n  .last_mes .main_location:hover, .last_mes .sub_location:hover {\n    background: var(--gal-bg-medium, #e8e2d9);\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);\n    border-color: var(--gal-primary, #b4a295);\n    z-index: 1;\n  }\n  \n  .last_mes .main_location:active, .last_mes .sub_location:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    background: var(--gal-bg-medium, #e8e2d9);\n  }\n  \n  .main_location.selected, .sub_location.selected {\n    background: var(--gal-primary, #b4a295);\n    border-color: var(--gal-primary, #b4a295);\n    color: white;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);\n    transform: translateY(-2px);\n    z-index: 2;\n  }\n  \n  .location_name {\n    font-weight: bold;\n    font-size: 15px;\n    display: block;\n    margin-bottom: 8px;\n    color: var(--gal-text-dark, #6b5f56);\n    transition: color 0.2s ease;\n  }\n  \n  .main_location.selected .location_name, \n  .sub_location.selected .location_name {\n    color: white;\n  }\n  \n  .characters_list {\n    margin-top: 10px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n  }\n  \n  .character_name {\n    display: inline-block;\n    background: var(--gal-bg-light, #f8f4f0);\n    padding: 5px 10px;\n    margin: 2px;\n    border-radius: 20px;\n    color: var(--gal-text-muted, #a39589);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    font-size: 12px;\n    border: 1px solid var(--gal-border, #d3c6b9);\n    transition: all 0.2s ease;\n  }\n  \n  .character_name:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);\n    border-color: var(--gal-primary-light, #dcd1c7);\n  }\n  \n  .map_action_area {\n    display: flex;\n    justify-content: center;\n    padding-top: 20px;\n    margin-top: 15px;\n    border-top: 1px solid var(--gal-border, #d3c6b9);\n    grid-column: 1 / -1;\n  }\n  \n  .go_button {\n    background-color: var(--gal-success, #a5bdaa);\n    color: white;\n    border: none;\n    border-radius: 50px;\n    padding: 12px 35px;\n    font-size: 16px;\n    font-weight: normal;\n    cursor: pointer;\n    transition: background-color 0.2s ease, box-shadow 0.3s ease, transform 0.2s ease;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    letter-spacing: 0.5px;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .go_button::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n    transition: all 0.5s ease;\n  }\n  \n  .go_button:not(.disabled):hover {\n    background-color: #96b09b;\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);\n  }\n  \n  .go_button:not(.disabled):hover::before {\n    left: 100%;\n  }\n  \n  .go_button:not(.disabled):active {\n    transform: translateY(0);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    background-color: #96b09b;\n  }\n  \n  .go_button.disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background-color: var(--gal-bg-medium, #e8e2d9);\n    color: var(--gal-text-muted, #a39589);\n    box-shadow: none;\n  }\n  \n  .sub_location_container {\n    background-color: var(--gal-bg-medium, #e8e2d9);\n    border-radius: 16px;\n    padding: 20px;\n    border: 1px solid var(--gal-border, #d3c6b9);\n    margin-bottom: 20px;\n  }\n  \n  /* 响应式布局 */\n  @media (max-width: 600px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n  \n  @media (min-width: 601px) and (max-width: 900px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(3, 1fr);\n    }\n  }\n  \n  @media (min-width: 901px) {\n    .main_locations_container, .sub_location_container {\n      grid-template-columns: repeat(4, 1fr);\n    }\n  }\n  \n  /* 自定义滚动条 */\n  .map_container::-webkit-scrollbar {\n    width: 8px;\n  }\n  \n  .map_container::-webkit-scrollbar-track {\n    background: var(--gal-bg-light, #f8f4f0);\n    border-radius: 4px;\n  }\n  \n  .map_container::-webkit-scrollbar-thumb {\n    background: var(--gal-primary, #b4a295);\n    border-radius: 4px;\n    border: 2px solid var(--gal-bg-light, #f8f4f0);\n  }\n  \n  .map_container::-webkit-scrollbar-thumb:hover {\n    background: var(--gal-primary-light, #dcd1c7);\n  }\n</style>",
                "constant": false,
                "selective": true,
                "insertion_order": 100,
                "enabled": true,
                "position": "before_char",
                "use_regex": true,
                "extensions": {
                    "position": 0,
                    "exclude_recursion": false,
                    "display_index": 3,
                    "probability": 100,
                    "useProbability": true,
                    "depth": 4,
                    "selectiveLogic": 0,
                    "group": "",
                    "group_override": false,
                    "group_weight": 100,
                    "prevent_recursion": false,
                    "delay_until_recursion": false,
                    "scan_depth": null,
                    "match_whole_words": null,
                    "use_group_scoring": false,
                    "case_sensitive": null,
                    "automation_id": "",
                    "role": 0,
                    "vectorized": false,
                    "sticky": 0,
                    "cooldown": 0,
                    "delay": 0
                }
            }
        ],
        "name": "【地图导航】"
    }
}