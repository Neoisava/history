export const __webpack_id__=20;export const __webpack_ids__=[20];export const __webpack_modules__={4020:t=>{t.exports='function extract_tags_from(name){return[...name.matchAll(/【(.*?)】/g)].map((match=>match[1].toLowerCase()))}function extract_control_tags(){return function sortUnique(array){return _.sortedUniq(_.sortBy(array))}([...extract_tags_from($("#settings_preset_openai").find(":selected").text()),...$("#world_info").find(":selected").toArray().map((node=>$(node).text())).flatMap(extract_tags_from),...extract_tags_from($("#connection_profiles").find(":checked").text())])}function check_should_enable(title,tags){return[...title.matchAll(/【(.*?)】/g)].map((match=>match[1])).some((tag_list=>tag_list.split("&").map((tag=>tag.toLowerCase())).every((expected=>tags.includes(expected)))))}const toggle_tags_throttled=_.throttle((async function toggle_tags(){const tags=extract_control_tags();!async function toggle_tagged_preset_prompts(tags){const prompt_identifiers_to_be_toggled=$("#completion_prompt_manager").find("a[title]").filter((function(){return null!==$(this).text().match(/【.*?】/)})).toArray().map((prompt_anchor=>{const $anchor=$(prompt_anchor),$li=$anchor.closest("li");return{identifier:$li.attr("data-pm-identifier"),should_toggle:check_should_enable($anchor.attr("title"),tags)!==$li.find(".prompt-manager-toggle-action").hasClass("fa-toggle-on")}})).filter((({should_toggle:should_toggle})=>should_toggle)).map((({identifier:identifier})=>`identifier=${identifier}`));0!==prompt_identifiers_to_be_toggled.length&&await triggerSlash(`/setpromptentry ${prompt_identifiers_to_be_toggled.join(" ")}`)}(tags),async function toggle_tagged_regexes(tags){const regexes=getTavernRegexes({scope:"all"}),new_regexes=structuredClone(regexes);new_regexes.filter((regex=>null!==regex.script_name.match(/【.*?】/))).forEach((regex=>{regex.enabled=check_should_enable(regex.script_name,tags)})),_.isEqual(regexes,new_regexes)||await replaceTavernRegexes(new_regexes,{scope:"all"})}(tags),async function toggle_tagged_scripts(tags){const scripts_to_be_toggled=$("#script-settings-content").find(".script-item").filter((function(){return null!==$(this).find(".script-item-name").text().match(/【.*?】/)})).toArray().map((script=>{const $div=$(script),should_enabled=check_should_enable($div.find(".script-item-name").text(),tags),is_enabled=$div.find(".toggle-script").prop("checked");return{button:$div.find(".script-toggle-"+(is_enabled?"on":"off")),should_toggle:should_enabled!==is_enabled}})).filter((({should_toggle:should_toggle})=>should_toggle)).map((({button:button})=>button));for(const script of scripts_to_be_toggled)script.trigger("click")}(tags)}),1e3,{trailing:!1});$((()=>{toggle_tags_throttled(),eventMakeFirst(tavern_events.SETTINGS_UPDATED,toggle_tags_throttled)}));\n'}};